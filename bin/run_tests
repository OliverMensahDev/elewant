#!/usr/bin/env sh

set -e

if [ "${TRAVIS}" = true ]; then
    phpenv config-rm xdebug.ini
fi

echo ">>>>>>>>>>>>> CLEAR CACHE  <<<<<<<<<<<<<"
bin/console cache:clear --env=test

echo ">>>>>>>>>>>> PARALLEL LINT  <<<<<<<<<<<<"
vendor/bin/parallel-lint --colors bin config public specs src tests

echo ">>>>>>>>> PHP STATIC ANALYSIS  <<<<<<<<<"
vendor/bin/phpstan analyse --configuration phpstan.neon --level max --no-progress src

echo ">>>>>>>>>>> PHP CODE SNIFFER <<<<<<<<<<<"
vendor/bin/phpcs

echo ">>>>>>>>>>>>>>> PHP SPEC <<<<<<<<<<<<<<<"
vendor/bin/phpspec run --no-interaction

echo ">>>>>>>>>>>>>>> PHP UNIT <<<<<<<<<<<<<<<"
vendor/bin/phpunit
